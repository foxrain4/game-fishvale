<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #e0f7fa;
      text-align: center;
      padding: 2rem;
    }
    .map-container, .stats-container {
      display: flex;
      justify-content: center;
      gap: 1rem;
      flex-wrap: wrap;
      margin-top: 1rem;
    }
    .location {
      background-color: #ffffff;
      border: 2px solid #00838f;
      border-radius: 12px;
      padding: 1rem;
      width: 150px;
      cursor: pointer;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      transition: transform 0.2s;
    }
    .location.locked {
      opacity: 0.5;
      cursor: not-allowed;
    }
    .location:hover:not(.locked) {
      transform: scale(1.05);
    }
    .output {
      margin-top: 2rem;
      font-size: 1.2rem;
      color: #006064;
    }
    .stats {
      background: #ffffff;
      padding: 1rem;
      border-radius: 12px;
      border: 2px solid #00838f;
    }
    .scene {
      margin: 2rem auto;
      width: 400px;
      height: 200px;
    }
  </style>
</head>
<body>
  <div class="map-container" id="map"></div>
  <div class="scene">
    <svg viewBox="0 0 400 200">
      <rect x="0" y="0" width="400" height="200" fill="#b3e5fc" />
      <ellipse cx="200" cy="180" rx="180" ry="40" fill="#4fc3f7" />
      <circle cx="100" cy="160" r="5" fill="#ffffff" />
      <circle cx="300" cy="165" r="7" fill="#ffffff" />
      <path d="M150 160 Q160 150 170 160 Q180 170 190 160 Q200 150 210 160" stroke="#039be5" fill="none" stroke-width="3" />
      <text x="200" y="30" text-anchor="middle" fill="#01579b" font-size="20">Relaxing Waters</text>
    </svg>
  </div>

  <div class="output" id="output">Where would you like to go?</div>

  <div class="stats-container">
    <div class="stats" id="stats"></div>
  </div>

  <script>
    const adjectives = ["Silent", "Golden", "Twilight", "Foggy", "Crimson", "Misty", "Sunset", "Hidden", "Windy", "Lush"];
    const features = ["Cove", "Lagoon", "Creek", "Bay", "Marsh", "River", "Pier", "Glen", "Fjord", "Terrace"];
    const fishTraits = ["Golden", "Spotted", "Glowing", "Shadow", "Amber", "Silver", "Velvet", "Dusky", "Wander", "Fire"];
    const fishTypes = ["Trout", "Koi", "Snapper", "Minnow", "Perch", "Bass", "Cod", "Ray", "Catfish", "Eel"];
    const localNames = ["Finn", "Luna", "Tide", "Marlin", "Bree", "Coral", "River", "Kai"];
    const scenicDescriptions = [
      "You pause to admire the golden hues dancing on the water's surface.",
      "A gentle breeze rustles the reeds, filling you with calm.",
      "You feel small, yet peaceful among the towering cliffs.",
      "The sound of trickling water soothes your soul.",
      "You breathe in the earthy aroma of moss-covered stones.",
      () => `${localNames[Math.floor(Math.random() * localNames.length)]} says: \"Sometimes the fish come out when it rains.\"`
    ];

    function generateLocationName() {
      return adjectives[Math.floor(Math.random() * adjectives.length)] + ' ' + features[Math.floor(Math.random() * features.length)];
    }

    function generateFishName() {
      return fishTraits[Math.floor(Math.random() * fishTraits.length)] + ' ' + fishTypes[Math.floor(Math.random() * fishTypes.length)];
    }

    const mapContainer = document.getElementById('map');
    const output = document.getElementById('output');
    const statsDisplay = document.getElementById('stats');

    let currentLocation = null;
    let allLocations = [];

    let playerStats = {
      gold: 0,
      experience: 0,
      stamina: 100,
      skills: 1
    };

    function renderMap() {
      mapContainer.innerHTML = '';
      if (allLocations.length < 20) {
        for (let i = 0; i < 5; i++) {
          allLocations.push({
            name: generateLocationName(),
            skillReq: Math.floor(Math.random() * 5) // Skills 0 to 4
          });
        }
      }

      const unlocked = allLocations.filter(l => l.skillReq <= playerStats.skills);
      if (unlocked.length === 0) allLocations[0].skillReq = 0; // Ensure one is always available

      allLocations.slice(0, 5).forEach(loc => {
        const div = document.createElement('div');
        div.className = 'location';
        div.textContent = `${loc.name} (Skill ${loc.skillReq})`;
        if (playerStats.skills < loc.skillReq) {
          div.classList.add('locked');
        } else {
          div.onclick = () => travelTo(loc);
        }
        mapContainer.appendChild(div);
      });
    }

    function travelTo(location) {
      currentLocation = location;
      output.textContent = `Traveling to ${location.name}...`;
      setTimeout(() => {
        const isFishingSpot = Math.random() < 0.5;
        if (isFishingSpot && playerStats.stamina > 0) {
          startFishing();
        } else {
          const description = scenicDescriptions[Math.floor(Math.random() * scenicDescriptions.length)];
          const text = typeof description === 'function' ? description() : description;
          output.textContent = `You've arrived at ${location.name}. ${text}`;
          updateStats();
        }
        renderMap();
      }, 2000);
    }

    function startFishing() {
      const caught = generateFishName();
      const earnedGold = Math.floor(Math.random() * 10) + 1;
      const earnedXP = Math.floor(Math.random() * 5) + 1;

      playerStats.gold += earnedGold;
      playerStats.experience += earnedXP;
      playerStats.stamina -= 5;

      output.textContent = `You caught a ${caught}! (+${earnedGold} gold, +${earnedXP} XP)`;
      updateStats();
    }

    function updateStats() {
      statsDisplay.innerHTML = `
        <strong>Stats</strong><br>
        Gold: ${playerStats.gold}<br>
        Experience: ${playerStats.experience}<br>
        Stamina: ${playerStats.stamina}<br>
        Skill Level: ${playerStats.skills}
      `;
    }

    renderMap();
    updateStats();
  </script>
</body>
</html>
