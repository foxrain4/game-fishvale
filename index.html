<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="map-container" id="map"></div>

  <div class="scene-box">
    <div class="description" id="scene-description">Where would you like to explore?</div>
  </div>

  <div class="stats-container">
    <div class="stats" id="stats"></div>
    <div class="inventory" id="inventory"></div>
  </div>
  <div class="version">v1.4</div>

  <script>
    const adjectives = ["Silent", "Golden", "Twilight", "Foggy", "Crimson", "Misty", "Sunset", "Hidden", "Windy", "Lush"];
    const features = ["Cove", "Lagoon", "Creek", "Bay", "Marsh", "River", "Pier", "Glen", "Fjord", "Terrace"];
    const fishTraits = ["Golden", "Spotted", "Glowing", "Shadow", "Amber", "Silver", "Velvet", "Dusky", "Wander", "Fire"];
    const fishTypes = ["Trout", "Koi", "Snapper", "Minnow", "Perch", "Bass", "Cod", "Ray", "Catfish", "Eel"];
    const scenicDescriptions = [
      "You pause to admire the golden hues dancing on the water's surface.",
      "A gentle breeze rustles the reeds, filling you with calm.",
      "You feel small, yet peaceful among the towering cliffs.",
      "The sound of trickling water soothes your soul.",
      "You breathe in the earthy aroma of moss-covered stones."
    ];

    const mapContainer = document.getElementById('map');
    const sceneDescription = document.getElementById('scene-description');
    const statsDisplay = document.getElementById('stats');
    const inventoryDisplay = document.getElementById('inventory');

    let playerStats = {
      gold: 0,
      experience: 0,
      inventory: []
    };

    let autoFishTimer = null;

    function generateLocationName() {
      return adjectives[Math.floor(Math.random() * adjectives.length)] + ' ' + features[Math.floor(Math.random() * features.length)];
    }

    function generateFishName() {
      return fishTraits[Math.floor(Math.random() * fishTraits.length)] + ' ' + fishTypes[Math.floor(Math.random() * fishTypes.length)];
    }

    function generateLocations() {
      const locations = [];
      for (let i = 0; i < 5; i++) {
        const name = generateLocationName();
        const isFishingSpot = Math.random() < 0.5;
        locations.push({ name, isFishingSpot });
      }
      return locations;
    }

    function renderMap() {
      mapContainer.innerHTML = '';
      const locations = generateLocations();

      locations.forEach(loc => {
        const div = document.createElement('div');
        div.className = 'location';
        div.textContent = loc.name;
        div.onclick = () => explore(loc);
        mapContainer.appendChild(div);
      });
    }

    function explore(location) {
      if (autoFishTimer) clearInterval(autoFishTimer);
      sceneDescription.textContent = `Exploring ${location.name}...`;

      setTimeout(() => {
        if (location.isFishingSpot) {
          autoFishTimer = setInterval(() => autoFish(), 5000);
          sceneDescription.textContent = `You've arrived at ${location.name}. Fishing quietly...`;
        } else {
          sceneDescription.textContent = `You've arrived at ${location.name}. ${scenicDescriptions[Math.floor(Math.random() * scenicDescriptions.length)]}`;
        }
        renderMap();
      }, 1500);
    }

    function autoFish() {
      const caught = generateFishName();
      let earnedGold = Math.floor(Math.random() * 6) + 3;
      let earnedXP = Math.floor(Math.random() * 4) + 2;

      // 20% chance for rare loot
      if (Math.random() < 0.2 && playerStats.inventory.length < 6) {
        const lootTypes = ["XP Bonus", "Gold Bonus", "XP x2", "Gold x2"];
        const loot = lootTypes[Math.floor(Math.random() * lootTypes.length)];
        playerStats.inventory.push(loot);

        if (loot === "XP Bonus") earnedXP += 5;
        if (loot === "Gold Bonus") earnedGold += 5;
        if (loot === "XP x2") earnedXP *= 2;
        if (loot === "Gold x2") earnedGold *= 2;
      }

      playerStats.gold += earnedGold;
      playerStats.experience += earnedXP;
      sceneDescription.textContent = `You caught a ${caught}! (+${earnedGold} gold, +${earnedXP} XP)`;
      updateStats();
    }

    function updateStats() {
      statsDisplay.innerHTML = `
        <strong>Stats</strong><br>
        Gold: ${playerStats.gold}<br>
        Experience: ${playerStats.experience}
      `;

      inventoryDisplay.innerHTML = '<strong>Inventory</strong><br>' +
        playerStats.inventory.map((item, index) =>
          `<div>${item} <button onclick="removeItem(${index})">Delete</button></div>`
        ).join('');
    }

    function removeItem(index) {
      playerStats.inventory.splice(index, 1);
      updateStats();
    }

    renderMap();
    updateStats();
  </script>
</body>
</html>
